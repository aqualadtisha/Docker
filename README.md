# Docker

Разработка простого Docker образа для собственного сервера, а так же основы контейнеризации с Docker-compose.

## Part 1. Мини веб-сервер

Мини сервер написан на  **C** и **FastCgi** и возвращает простейшую страничку с надписью `Hello World!` \
Располагается в папке **server**.

Сервер запускается через *spawn-fcgi* на порту 8080.

Написан собственный *nginx.conf*, который проксирует все запросы с 81 порта на *127.0.0.1:8080*. \
Располагается в папке **nginx**.

`Правильную работу сервера можно проверить, если перейти в браузере по адресу localhost:81.
Там должна выдаваться страничка с надписью "Hello World!"`

## Part 2. Базовый Docker

Докер образ:
- собирает исходники мини сервера на FastCgi из Part 1
- запускает его на 8080 порту
- копирует внутрь образа написанный *./nginx/nginx.conf*
- запускает **nginx**

`nginx можно установить внутрь докера самостоятельно, а можно воспользоваться готовым образом с nginx'ом, как базовым.
В данной работе использовался второй вариант.`

*(Данный образ может содержать ошибки, которые будут исправлены в следующей части)*

Для сборки Dockerfile запустите скрипт run.sh в папке части. \
*(По *localhost:80/status* должна отдаваться страничка со статусом **nginx**)*

## Part 3. Dockle

В данной части идет проверка образа с помощью утилиты Dockle на предмет ошибок. \
В папке этой части лежит уже исправленный файл из предыдущей части.

Проверку и запуск файла можно осуществить запустив скрипт run.sh.

## Part 4. Базовый Docker Compose

Написан файл *docker-compose.yml*, с помощью которого:
- Поднимается докер контейнер из предыдущей части (в локальной сети, т.е. порты не замаплены на локальную машину)_
- Поднимается докер контейнер с **nginx**, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера
- Замаплен 8080 порт второго контейнера на 80 порт локальной машины

Проверку и запуск файла можно осуществить запустив скрипт run.sh. \
*(По *localhost:80/status* должна отдаваться страничка со статусом **nginx**)*
